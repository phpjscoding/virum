<div
  role="dialog"
  aria-labelledby="cart-title"
  aria-describedby="cart-description"
  aria-modal="true"
  class="fixed top-0 right-0 bottom-0 w-full max-w-md bg-white z-[101] transition-transform duration-500 ease-out transform flex flex-col translate-x-0 shadow-2xl"
>
  <!-- Hidden description for screen readers -->
  <span id="cart-description" class="sr-only">Your shopping cart items and checkout</span>

  <!-- Header Section -->
  <div class="flex items-center justify-between p-8 border-b border-zinc-100">
    <h2 id="cart-title" class="text-xs font-bold tracking-[0.3em] uppercase">Shopping Bag</h2>
    <button
      onclick="toggleCart(false)"
      aria-label="Close cart"
      class="p-2 hover:bg-zinc-100 focus:outline-none focus:ring-2 focus:ring-zinc-900 rounded-lg transition-colors"
    >
      <i data-lucide="x" class="w-6 h-6" aria-hidden="true"></i>
    </button>
  </div>

  <!-- Shipping Progress Section -->
  <div class="px-8 py-6 bg-zinc-50 border-b border-zinc-100">
    <p class="text-[10px] font-bold tracking-widest uppercase text-zinc-600 mb-2">
      <span class="sr-only">Shipping status: </span>
      Unlocked free artisan shipping!
    </p>
    <div
      class="w-full h-1 bg-zinc-200 rounded-full overflow-hidden"
      role="progressbar"
      aria-valuenow="100"
      aria-valuemin="0"
      aria-valuemax="100"
      aria-label="Free shipping progress"
    >
      <div class="h-full bg-zinc-900 transition-all duration-700" style="width: 100%"></div>
    </div>
  </div>

  <!-- Cart Items Section -->
  <div class="flex-1 overflow-y-auto px-8 py-4 space-y-8 no-scrollbar" role="list" aria-label="Cart items">
    <!-- Cart Item -->
    {% for item in cart.line_items %}
    <div class="flex gap-6" role="listitem">
      <div class="w-20 aspect-[3/4] bg-zinc-100 flex-shrink-0">
        <img
          src="https://images.unsplash.com/photo-1510076857177-7470076d4098?auto=format&amp;fit=crop&amp;q=80&amp;w=800"
          alt="Aurora Glass Pitcher - Handcrafted glass pitcher with artistic design"
          class="w-full h-full object-cover"
          loading="lazy"
          width="200"
          height="200"
        >
      </div>

      <div class="flex-1 flex flex-col justify-between py-1">
        <div>
          <div class="flex justify-between">
            <h3 class="text-xs font-bold uppercase"> {{  item.title | escape }} </h3>
            <button
              onclick="removeFromCart('p2', 'set-1')"
              aria-label="Remove Aurora Glass Pitcher from cart"
              class="p-1 hover:bg-zinc-100 focus:outline-none focus:ring-2 focus:ring-red-500 rounded transition-colors"
            >
              <i data-lucide="trash-2" class="w-3 h-3 text-zinc-300 hover:text-red-500" aria-hidden="true"></i>
            </button>
          </div>
          <p class="text-[10px] text-zinc-400 uppercase tracking-widest mt-1">
            <span class="sr-only">Collection: </span>set 1
          </p>
        </div>

        <div class="flex justify-between items-center">
          <!-- Quantity Controls -->
          <div class="flex border border-zinc-100" role="group" aria-label="Quantity controls for Aurora Glass Pitcher">
            <button
              onclick="updateCartQuantity('p2', 'set-1', -1)"
              aria-label="Decrease quantity by one. Current quantity: 2"
              class="p-1 hover:bg-zinc-100 focus:outline-none focus:ring-2 focus:ring-zinc-900 transition-colors"
            >
              <i data-lucide="minus" class="w-3 h-3" aria-hidden="true"></i>
            </button>

            <span class="w-6 text-center text-xs font-bold" aria-label="Current quantity: 2 items">2</span>

            <button
              onclick="updateCartQuantity('p2', 'set-1', 1)"
              aria-label="Increase quantity by one. Current quantity: 2"
              class="p-1 hover:bg-zinc-100 focus:outline-none focus:ring-2 focus:ring-zinc-900 transition-colors"
            >
              <i data-lucide="plus" class="w-3 h-3" aria-hidden="true"></i>
            </button>
          </div>

          <span class="text-xs font-medium" aria-label="Price: $178.00">$178.00</span>
        </div>
      </div>
    </div>
    {% endfor %}


  </div>

  <!-- Footer Section -->
  <div class="p-8 border-t border-zinc-100">
    <div class="flex justify-between items-center mb-6">
      <span class="text-[10px] font-bold uppercase tracking-widest text-zinc-400" id="subtotal-label">Subtotal</span>
      <span class="text-xl font-medium" aria-labelledby="subtotal-label" aria-label="Subtotal: $178.00">$178.00</span>
    </div>

    <div class="grid grid-cols-2 gap-3">
      <button
        onclick="navigateTo('cart')"
        class="py-4 border border-zinc-900 text-[10px] font-bold uppercase tracking-widest hover:bg-zinc-50 focus:outline-none focus:ring-2 focus:ring-zinc-900 focus:ring-offset-2 transition-colors"
        aria-label="View full shopping cart"
      >
        View Cart
      </button>

      <button
        class="py-4 bg-zinc-900 text-white text-[10px] font-bold uppercase tracking-widest hover:bg-zinc-800 focus:outline-none focus:ring-2 focus:ring-zinc-900 focus:ring-offset-2 transition-colors"
        aria-label="Proceed to checkout"
      >
        Checkout
      </button>
    </div>
  </div>
</div>
